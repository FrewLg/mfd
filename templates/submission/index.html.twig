{% extends 'base.html.twig' %}
{% block title %}
	Submission
{% endblock %}
{% block styles %}
	<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css"/>
{% endblock %}
{% block container_title %}
	Submissions
{% endblock %}
{% block body %}
	<!-- testFilter.html.twig -->
	{% import "common/macro/input.html.twig" as input_macro %}
 

	<div class="row">
		<div class="col-lg-12  mb-2">
			<div class="accordion" id="accordionExample">
				<div class="accordion-item active">
					<h5 class="accordion-header m-0 " id="headingOne">
						<button class="accordion-button fw-semibold collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
							Filter
						</button>
					</h5>
					<div id="collapseOne" class="accordion-collapse collapse active" aria-labelledby="headingOne" data-bs-parent="#accordionExample" style="">
						<div class="accordion-body active">
							{% if sumissionFilterForm is defined %}

								{{ form_start(sumissionFilterForm) }}
								{% for child in sumissionFilterForm.children %}
									{% if child.vars.name != "_token" %}

										{{input_macro.input(child)}}
									{% endif %}
								{% endfor %}
								<button class="btn  col-3 float-right btn-warning my-3  schedule-submit-button" type="reset">Clear</button>
								<button class="btn mx-1  col-3 float-right btn-info my-3  schedule-submit-button" type="submit">Filter</button>

								{{ form_end(sumissionFilterForm) }}

							{% else %}
								<div>Filter not allowed here</div>
							{% endif %}


						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-lg-10">

			<div class="card ">
				<div class="card-header  ">
					
<div class="row align-items-center">
                                        <div class="col">                      
                                            
											
											 <span  class="font-12 fw-bold  ">Submissions</span><i class="fas fa-paper-plane "></i>
					<a href="#" class="avatar-box thumb-xxs align-self-center">
						<span class="avatar-title bg-soft-info rounded-circle font-13 font-weight-normal">
							{{submissions.totalItemCount}}
						</span>
					</a>                     
                                        </div><!--end col-->
                                        <div class="col-auto"> 
                                            <div class="dropdown">
                                                <a href="widgets.html#" class="btn btn-sm btn-outline-light dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                   <span  class="font-12 fw-bold  ">Export</span><i class="las la-angle-down ms-1"></i>
                                                </a>
                                                <div class="dropdown-menu dropdown-menu-end">
                                                    <a class="dropdown-item" href="{{ path('collegesubs', {'id': call.id}) }}"><i class="fas fa-file-excel text-info"></i> Titles by college</a>
                                                    <a class="dropdown-item" href="{{ path('allbythemeex', {'id': call.id}) }}"><i class="fas fa-file-excel text-primary"></i> Titles by theme</a>
                                                    <a class="dropdown-item" href="{{ path('export_researchersexcel', {'id': call.id }) }}"><i class="fas fa-file-excel text-secondary"></i> Researchers</a> 
                                                    <a class="dropdown-item" href="{{ path('call_export_winner', {'uidentifier': call.uidentifier}) }}"><i class="fas fa-file-excel text-success"></i> Winners</a> 
                                                    <a class="dropdown-item" href="{{ path('filedownload', {'uidentifier': call.uidentifier }) }}"><i class="fa  fa-file-archive text-warning"></i> Download concept notes</a> 
                                                    <a class="dropdown-item" href="{{ path('attachements', {'uidentifier': call.uidentifier }) }}"><i class="fa  fa-file-archive text-orange"></i> Download attachements</a> 
                                                </div>
                                            </div>               
                                        </div><!--end col-->
                                    </div>
				</div>

				<div class="card-body   ">


					<div class="table-responsive">

					<div class="row ">{{ include('submission/submission_index_table.html.twig') }}</div>
				 
						<div class="navigation">{{ knp_pagination_render(submissions) }}</div>
					</div>
				</div>
			</div>
		</div>


		<div class="col-lg-2">
			<div class="card ">
				<div class="card-header  ">
					<b>Quick Filter</b>
				</div>
				<div class="card-body container ">
					<div class="row ">{{ include('dashboard/quick_filter.html.twig') }}</div>
				</div>
			</div>

		</div>
	</div>
{% endblock %}
{% block script %}
	<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
	<script type="text/javascript">
		$(function () {

$('.daterangerpicker').daterangepicker({
autoUpdateInput: false,
locale: {
cancelLabel: 'Clear'
}
});

$('.daterangerpicker').on('apply.daterangepicker', function (ev, picker) {
$(this).val(picker.startDate.format('MM/DD/YYYY') + ' - ' + picker.endDate.format('MM/DD/YYYY'));
});

$('.daterangerpicker').on('cancel.daterangepicker', function (ev, picker) {
$(this).val('');
});

});
	</script>
{% endblock %}
